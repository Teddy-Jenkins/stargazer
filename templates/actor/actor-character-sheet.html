<form class="{{cssClass}} {{actor.type}} flexcol sheet-contents" autocomplete="off">

  {{!-- Sheet Header --}}
  <header class="sheet-header">
      
      <div class="header-fields">
        <div class="top-section grid top-section-grid">
        <div class="portrait-section">
          <img class="profile" id="actor-profile" src="{{actor.img}}" title="{{actor.name}}" data-edit="img"/>
          <h2 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Name"/></h2>
        </div>
          <div class="char-info">
            <div class="char-stats-container">
              <div class="level-container">
                <h2 >Level</h2>
                <h2 class="level"><input name="data.level.value" type="text" value="{{data.level.value}}" placeholder="Pocket" data-dtype="String"/></h2>
              </div>
              <div class="xp-container">
                <h2 >XP</h2>
                <div class="flex-group-center xp">
                  <div class="resource-content flexrow flex-center flex-between">
                    <input type="text" name="data.level.xp.currentXp" value="{{data.level.xp.currentXp}}" data-dtype="Number"/>
                    <span> / </span>
                    <input type="text" name="data.level.xp.maximumXp" value="{{data.level.xp.maximumXp}}" data-dtype="Number"/>
                  </div>
                </div>
              </div>
              <div class="pocket-container">
                <h2>KR</h2>
                <h2 class="pocket"><input name="data.credits.pocket.value" type="text" value="{{data.credits.pocket.value}}" placeholder="Pocket" data-dtype="String"/></h2>
              </div>
              <div class="bank-container">
                <h2>SP</h2>
                <div class="flex-group-center xp">
                  <div class="resource-content flexrow flex-center flex-between">
                    <input type="text" name="data.sp.value" value="{{data.sp.value}}" data-dtype="Number"/>
                    <span> / </span>
                    <input type="text" name="data.sp.max" value="{{data.sp.max}}" data-dtype="Number"/>
                  </div>
                </div>
              </div>
              <div class="iniquity-container">
                <h2 for="data.cp.value" class="rollable" data-roll="(@cp.value)d6cs>=4" data-label="Composure Points">CP</h2>
                <h2 class="iniquity"><input name="data.cp.value" type="text" value="{{data.cp.value}}" data-dtype="Number"/></h2>
              </div>
            </div>
            <div class="character-notes">
              {{editor content=data.characterNotes.description target="data.characterNotes.description" button=true owner=owner editable=editable}}
            </div>
            <div class="resources">
              <div class="resource flex-group-center">
                  <label for="data.hp.value" class="resource-label">HP</label>
                  <div class="resource-content flexrow flex-center flex-between">
                    <input class="hp-input" type="text" name="data.hp.max" value="{{data.hp.max}}" data-dtype="Number"/>
                    <input class="hp-input" type="text" name="data.hp.value" value="{{data.hp.value}}" data-dtype="Number"/>
                    <input class="hp-input" type="text" name="data.hp.deathThreshold" value="{{data.hp.deathThreshold}}" data-dtype="Number"/>
                  </div>
              </div>
              <div class="resource flex-group-center">
                  <label for="data.ar.value" class="resource-label rollable" data-roll="(@ar.value)d6cs>=4" data-label="Armor">AR</label>
                  <div class="resource-content flexrow flex-center flex-between">
                    <input type="text" name="data.ar.value" value="{{data.ar.value}}" data-dtype="Number"/>
                    <input type="text" name="data.ar.max" value="{{data.ar.max}}" data-dtype="Number"/>
                  </div>
              </div>
              <div class="resource flex-group-center">
                <label for="data.sr.value" class="resource-label rollable" data-roll="(@sr.value)d6cs>=4" data-label="Shield">SR</label>
                <div class="resource-content flexrow flex-center flex-between">
                  <input type="text" name="data.sr.value" value="{{data.sr.value}}" data-dtype="Number"/>
                  <input type="text" name="data.sr.max" value="{{data.sr.max}}" data-dtype="Number"/>
                </div>
              </div>
              <div class="resource flex-group-center">
                <label for="data.ap.value" class="resource-label">AP</label>
                <div class="resource-content flexrow flex-center flex-between">
                  <input type="text" name="data.ap.value" value="{{data.ap.value}}" data-dtype="Number"/>
                  <input type="text" name="data.ap.max" value="{{data.ap.max}}" data-dtype="Number"/>
                </div>
            </div>
          </div>
        </div>
          {{!-- Sheet Tab Navigation --}}
        <nav class="sheet-tabs tabs" data-group="primary">
            <a class="item" data-tab="skills">Skills</a>
            <a class="item" data-tab="items">Equipment</a>
            <a class="item" data-tab="assets">Assets</a>
            <a class="item" data-tab="features">Features</a>
        </nav>
      </div>
    </div>
  </header>

  

  {{!-- Sheet Body --}}
  <section class="sheet-body">

      {{!-- Skills Tab --}}
      <div class="tab biography" data-group="primary" data-tab="skills">
          <!-- {{editor content=data.biography target="data.biography" button=true owner=owner editable=editable}} -->
          <div class="skills">
            {{#each data.skills as |skill key|}}
            {{#if skill.updated}}
                <div class="skill" data-skill="{{key}}">

                    <h4 for="data.skills.{{key}}.value" class="skill-name rollable" data-roll="(@skills.{{key}}.value + @skills.{{key}}.edges.value - @skills.{{key}}.drawbacks.value)d6cs>=4" data-label="{{key}}">{{key}}</h4>
                    <input class="skill-input" type="text" name="data.skills.{{key}}.value" value="{{skill.value}}" data-dtype="Number"/>
                  
                    <input class="skill-edges" type="text" name="data.skills.{{key}}.edges.value" value="{{skill.edges.value}}" data-dtype="Number"/>
                  
                    <input class="skill-checkbox" name="data.skills.{{key}}.marked" type="checkbox" {{checked skill.marked}}>

                    <input class="skill-drawbacks" type="text" name="data.skills.{{key}}.drawbacks.value" value="{{skill.drawbacks.value}}" data-dtype="Number"/>
                </div>

                {{/if}}
            {{/each}}
          </div>
      </div>

      <div class="tab weapons" data-group="primary" data-tab="weapons">
        
    </div>

    {{!-- Owned Items Tab --}}
    <div class="tab items" data-group="primary" data-tab="items">
      <div class="resource flex-group-center">
        <label for="data.carryingCapacity.current" class="resource-label">Carrying Capacity</label>
        <div class="resource-content flexrow flex-center flex-between">
          <input type="text" name="data.carryingCapacity.current" value="{{data.carryingCapacity.current}}" data-dtype="Number"/>
          <span> / </span>
          <input type="text" name="data.carryingCapacity.maximum" value="{{data.carryingCapacity.maximum}}" data-dtype="Number"/>
        </div>
      </div>
      <h2>Attacks</h2>
      <ol class="items-list">
        <li class="item flexrow item-header">
          <div class="item-image"></div>
          <div class="item-name">Name</div>
          <div class="item-damage">Damage</div>
          <div class="item-slots">Slots</div>
          <div class="item-range">Range</div>
          <div class="item-ammo">Ammo</div>
          <a class="item-control item-create" title="Create item" data-type="weapon"><i class="fas fa-plus"></i> Add Weapon</a>
        </li>
      {{#each weapons as |weapon id|}}
        <li class="item flexrow items-list-item" data-item-id="{{weapon._id}}">
            <div class="item-image" ><img src="{{weapon.img}}" title="{{weapon.name}}" width="24" height="24"/></div>
            <h4 class="item-name collapsible"><a class="item-name">{{weapon.name}}</a></h4>
            <h4 class="item-damage rollable" data-roll="{{data.damage}}" data-label="{{damage}}"><a class="item-damage">{{data.damage}}</a></h4>
            <h4 class="item-slots">{{data.slots}}</h4>
            <h4 class="item-range">{{data.range}}</h4>
            <h4 class="item-ammo">{{data.ammoCurrent}}/{{data.ammoMax}}</h4>
            <div class="item-controls">
                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
            </div>
        </li>
        <div class="item-description">
          {{{data.description}}}
        </div>
      {{/each}}
      </ol>

          <h2>Equipment</h2>
          <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-image"></div>
                <div class="item-name">Name</div>
                <div class="item-quantity">Quantity</div>
                <div class="item-quantity">Slots</div>
                <div></div>
                <div></div>
                <div class="item-controls">
                  <a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add item</a>
                </div>
              </li>
          {{#each gear as |item id|}}
              <li class="item flexrow items-list-item" data-item-id="{{item._id}}">
                  <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/></div>
                  <h4 class="item-name collapsible"><a class="item-name">{{item.name}}</a></h4>
                  <h4 class="item-quantity">{{data.quantity}}</h4>
                  <h4 class="item-slots">{{data.slots}}</h4>
                  <h4></h4>
                  <h4></h4>
                  <div class="item-controls">
                      <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                      <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                  </div>
                  
              </li>
              <div class="item-description">
                {{{data.description}}}
              </div>
          {{/each}}
          </ol>
      </div>

      {{!-- Assets Tab --}}
    
    <div class="tab assets" data-group="primary" data-tab="assets">
        <h2>Assets</h2>
        <div class="augments-body">
        <div>
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-image"></div>
                <div class="item-name">Name</div>
                <a class="item-control item-create" title="Create Asset" data-type="asset"><i class="fas fa-plus"></i>Add Asset</a>
              </li>
          {{#each assets as |asset id|}}
          <ol class="items-list"></ol>
            <li class="item flexrow items-list-item" data-item-id="{{asset._id}}">
                <div class="item-image" ><img src="{{asset.img}}" title="{{asset.name}}" width="24" height="24"/></div>
                <h4 class="item-name collapsible"><a class="item-name">{{asset.name}}</a> [{{data.rating}}]</h4>
                <div class="item-controls">
                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
            </li>
            <div class="item-description">
              {{{data.description}}}
            </div>
          {{/each}}
          </ol>
        </div>
        </div>
    </div>
      {{!-- Owned Features Tab --}}
      <div class="tab features" data-group="primary" data-tab="features">
          <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-image"></div>
                <div class="item-name">Name</div>
                <div class="item-controls">
                  <a class="item-control item-create" title="Create item" data-type="feature"><i class="fas fa-plus"></i> Add item</a>
                </div>
              </li>
          {{#each features as |feature id|}}
              <li class="item flexrow" data-item-id="{{feature._id}}">
                  <div class="item-image"><img src="{{feature.img}}" title="{{feature.name}}" width="24" height="24"/></div>
                  <h4><a class="item-name collapsible">{{feature.name}}</a></h4>
                  <div class="item-controls">
                      <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                      <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                  </div>
              </li>
              <div class="item-description">
                {{{data.description}}}
              </div>
          {{/each}}
          </ol>
      </div>

      <script>
        var coll = Array.from(document.getElementsByClassName("collapsible"));
        var content = Array.from(document.getElementsByClassName("item-description"));
        var i;

        

        for (let i = 0; i < coll.length; i++) {
          coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            if (content[i].style.maxHeight){
              content[i].style.maxHeight = null;
            } else {
              content[i].style.maxHeight = content[i].scrollHeight + "px";
            }
        });
      }

        
      </script>

  </section>
</form>

